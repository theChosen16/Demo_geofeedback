# ============================================================================
# Railway Configuration - API Service
# https://docs.railway.com/reference/config-as-code
# ============================================================================

[build]
# Usar Dockerfile explícitamente
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

# Configuración de build
# watchPatterns = ["**/*.py", "requirements.txt", "Dockerfile"]

[deploy]
# Health check - CRÍTICO para que Railway sepa que el servicio está listo
healthcheckPath = "/api/v1/health"
healthcheckTimeout = 60

# Política de reinicio
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5

# Número de réplicas (free tier = 1)
numReplicas = 1

# Tiempo de gracia para shutdown
# Railway envía SIGTERM, espera este tiempo, luego SIGKILL
sleepApplication = false
